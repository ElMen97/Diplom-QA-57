# План автоматизации тестирования приложения "Путешествие дня"

**Цель:** Автоматизировать сценарии (как позитивные, так и негативные)  покупки тура через Приложение.

### Перечень автоматизируемых сценариев:

### Сценарии тестирования Frontend:

### Успешная оплата тура "Путешествие дня" при валидном заполнение полей формы "Оплата по карте" по действующей карте
1. Открываем страницу http://localhost:8080/;
1. Нажимаем кнопку "Купить";
1. Ввести номер карты со статусом APPROVED: 4444 4444 4444 4441;
1. Остальные поля заполнить корректными значениями;
1. Нажимаем кнопку "Прожолжить".
 
   Ожидаемый результат: Появляется сообщение "Успешно. Операция одобрена Банком."

### Успешная оплата в кредит тура "Путешествие дня" при валидном заполнение полей формы "Кредит по данным карты" по действующей карте 
1. Открываем страницу http://localhost:8080/;
1. Нажимаем кнопку "Купить в кредит";
1. Ввести номер карты со статусом APPROVED: 4444 4444 4444 4441;
1. Остальные поля заполнить корректными значениями;
1. Нажимаем кнопку "Прожолжить".

   Ожидаемый результат: Появляется сообщение "Успешно. Операция одобрена Банком."

### Отказ в оплате тура "Путешествие дня" при валидном заполнение полей формы "Оплата по карте" по declined карте 
1. Открываем страницу http://localhost:8080/;
1. Нажимаем кнопку "Купить";
1. Ввести номер карты со статусом DECLINED: 4444 4444 4444 4442;
1. Остальные поля заполнить корректными значениями;
1. Нажимаем кнопку "Прожолжить".

   Ожидаемый результат: Появляется сообщение "Ошибка! Банк отказал в проведении операции."

### Отказ в кредите на покупку тура "Путешествие дня" при валидном заполнение полей формы "Кредит по данным карты" по declined карте 
1. Открываем страницу http://localhost:8080/;
1. Нажимаем кнопку "Купить в кредит";
1. Ввести номер карты со статусом DECLINED: 4444 4444 4444 4442;
1. Остальные поля заполнить корректными значениями;
1. Нажимаем кнопку "Прожолжить".

   Ожидаемый результат: Появляется сообщение "Ошибка! Банк отказал в проведении операции."

### Заполнение всех полей валидными данными формы "Оплата по карте" тура "Путешествие дня" с последующим переключением на форму "Кредит по данным карты"
1. Открываем страницу http://localhost:8080/;
1. Нажимаем кнопку "Купить";
1. Заполинить все поля валидными значениями;
1. Нажимаем кнопку переключение на форму "Кредит по данным карты".

   Ожидаемый результат: форма переключиться, поля останутся заполненными теми же данными.

### Заполнение всех полей валидными данными формы "Кредит по данным карты" тура "Путешествие дня" с последующим переключением на форму "Оплата по карте"
1. Открываем страницу http://localhost:8080/;
1. Нажимаем кнопку "Купить в кредит";
1. Заполинить все поля валидными значениями;
1. Нажимаем кнопку переключение на форму "Оплата по карте".

   Ожидаемый результат: форма переключиться, поля останутся заполненными теми же данными.

## Тестирование полей формы

1. **Поле "Номер карты":**

#### Валидные номера карт

* '4444 4444 4444 4441', status: 'APPROVED'
* '4444 4444 4444 4442', status: 'DECLINED'

1. Заполнение поля валидными номерами карт с пробелами после каждых 4 символов, остальные поля заполнены валидно

   Ожидаемый результат: появление сообщения об успешной оплате тура

1. Заполнение поля валидными номерами карт без пробелов, остальные поля заполнены валидно

   Ожидаемый результат: появление сообщения об успешной оплате тура

1. Оставление поля пустым, остальные поля заполнены валидно
   
   Ожидаемый результат: под полем "Номер карты" появиться предупреждение об пустом поле

1. Заполнение поля 15 рандомными цифрами, остальные поля заполнены валидно

   Ожидаемый результат: под полем "Номер карты" появиться предупреждение о недопустимой длине поля

1. Заполнение поля "Номер карты" 20 рандомными цифрами, остальные поля заполнены валидно

   Ожидаемый результат: под полем "Номер карты" появиться предупреждение о недопустимой длине поля

1. Заполнение поля 16 рандомными цифрами, остальные поля заполнены валидно

   Ожидаемый результат: появление сообщения об отказе в оплате тура

1. Заполнение поля "Номер карты" 16 рандомными символами (не цифрами), остальные поля заполнены валидно

   Ожидаемый результат: под полем "Номер карты" появиться предупреждение об недопустимых символах

1. **Поле "Месяц":**

1. Заполнение поля значением 01, остальные поля заполнены валидно

   Ожидаемый результат: появление сообщения об успешной оплате тура

1. Заполнение поля значением 12, остальные поля заполнены валидно

   Ожидаемый результат: появление сообщения об успешной оплате тура

1. Оставление поля пустым, остальные поля заполнены валидно

   Ожидаемый результат: под полем "Месяц" появиться предупреждение об пустом поле

1. Заполнение поля номером от 1 до 9, остальные поля заполнены валидно

   Ожидаемый результат: автодополнение нулем вначале поля 

1. Заполнение поля 3 цифрами, остальные поля заполнены валидно

   Ожидаемый результат: автоудаление последней цифры

1. Заполнение поля значением 00, остальные поля заполнены валидно

   Ожидаемый результат: под полем "Месяц" появиться предупреждение об невалидном значение

1. Заполнение поля значением 13, остальные поля заполнены валидно

   Ожидаемый результат: под полем "Месяц" появиться предупреждение об невалидном значение

1. Заполнение поля двумя рандомными символами(не цифрами), остальные поля заполнены валидно

   Ожидаемый результат: под полем "Месяц" появиться предупреждение об невалидном значение    


1. **Поле "Год":**

1. Заполнение поля "Год" текущим годом и поля "Месяц" текущим месяцем, остальные поля заполнены валидно

   Ожидаемый результат: появление сообщения об успешной оплате тура

1. Оставление поля пустым

   Ожидаемый результат: под полем "Год" появиться предупреждение об пустом поле

1. Заполнение поля предыдущим годом, остальные поля заполнены валидно

   Ожидаемый результат: под полем "Год" появиться предупреждение об невалидном значение

1. Заполнение поля "Год" текущим годом, а поля "Месяц" предыдущим месяцем, остальные поля заполнены валидно

   Ожидаемый результат: под полем "Месяц" появиться предупреждение об невалидном значение


1. **Поле "Владелец":**

### Валидные значения:
* латиница в ВЕРХНЕМ РЕГИСТРЕ;
* допустимые спецсимволы - дефис и пробел;
* первый и последний символ должны быть буквами.

1. Заполнение поля валидными данными, остальные поля заполнены валидно

   Ожидаемый результат: появление сообщения об успешной оплате тура

1. Оставление поля пустым, остальные поля заполнены валидно

   Ожидаемый результат: под полем "Владелец" появиться предупреждение об пустом поле

1. Заполнение поля в нижнем регистре, остальные поля заполнены валидно

   Ожидаемый результат: автозаполнение поля "Владелец" в верхнем регистре

1. Заполнение поля с пробелами в начале и в конце, остальные поля заполнены валидно

   Ожидаемый результат: автоудаление лишних символов в поле "Владелец"

1. Заполнение поля "Владелец" с дефисами в начале и в конце, остальные поля заполнены валидно

   Ожидаемый результат: автоудаление лишних символов в поле "Владелец"

1. Заполнение поля "Владелец" кириллицей, остальные поля заполнены валидно

   Ожидаемый результат: под полем "Владелец" появиться предупреждение об невалидном значение

1. Заполнение поля "Владелец" рандомными спецсимволами, остальные поля заполнены валидно

   Ожидаемый результат: под полем "Владелец" появиться предупреждение об невалидном значение

1. **Поле "CVV":**

1. Заполнение поля "CVC/CVV" 3 цифрами, остальные поля заполнены валидно 

   Ожидаемый результат: появление сообщения об успешной оплате тура

1. Оставление поля пустым, остальные поля заполнены валидно

   Ожидаемый результат: под полем "CVC/CVV" появиться предупреждение об пустом поле

1. Заполнение поля "CVC/CVV" 2 рандомными цифрами, остальные поля заполнены валидно

   Ожидаемый результат: под полем "CVC/CVV"  появление сообщения об недопустимой длине

1. Заполнение поля "CVC/CVV" 4 рандомными цифрами, остальные поля заполнены валидно

   Ожидаемый результат: 4 цифра в поле "CVC/CVV" обрезается

1. Заполнение поля "CVC/CVV" 3 рандомными буквами, остальные поля заполнены валидно

   Ожидаемый результат: под полем "CVC/CVV"  появление сообщения об невалидном значение

1. Заполнение поля "CVC/CVV" 3 рандомными спецсимволами, остальные поля заполнены валидно

   Ожидаемый результат: под полем "CVC/CVV"  появление сообщения об невалидном значение

### Сценарии тестирования Backend:

1. Отправка POST запроса платежа с валидно заполненным body и данными действующей карты на  http://localhost:9999/payment  
   Ожидаемый результат: статус 200, появление соответствующей записей в БД

1. Отправка POST запроса на кредит с валидно заполненным body и данными действующей карты на  http://localhost:9999/credit  
   Ожидаемый результат: статус 200, появление соответствующей записей в БД

1. Отправка POST запроса платежа с валидно заполненным body и данными declined карты на  http://localhost:9999/payment  
   Ожидаемый результат: статус 200, появление соответствующей записей в БД

1. Отправка POST запроса на кредит с валидно заполненным body и данными declined карты на  http://localhost:9999/credit  
   Ожидаемый результат: статус 200, появление соответствующей записей в БД

1. Отправка POST запроса с пустым body на  http://localhost:9999/payment  
   Ожидаемый результат: статус 400, в БД не появляются новые записи

1. Отправка POST запроса с пустым body  на  http://localhost:9999/credit  
   Ожидаемый результат: статус 400, в БД не появляются новые записи

1. Отправка POST запроса платежа с пустым значением у атрибута number в body (остальные данные заполнены валидно) на  http://localhost:9999/payment  
   Ожидаемый результат: статус 400, в БД не появляются новые записи

1. Отправка POST запроса на кредит с пустым значением у атрибута number в body (остальные данные заполнены валидно) на  http://localhost:9999/credit  
   Ожидаемый результат: статус 400, в БД не появляются новые записи

1. Отправка POST запроса платежа с пустым значением у атрибута month в body (остальные данные заполнены валидно) на  http://localhost:9999/payment  
   Ожидаемый результат: статус 400, в БД не появляются новые записи

1. Отправка POST запроса на кредит с пустым значением у атрибута month в body (остальные данные заполнены валидно) на  http://localhost:9999/credit  
   Ожидаемый результат: статус 400, в БД не появляются новые записи

1. Отправка POST запроса платежа с пустым значением у атрибута year в body (остальные данные заполнены валидно) на  http://localhost:9999/payment  
   Ожидаемый результат: статус 400, в БД не появляются новые записи

1. Отправка POST запроса на кредит с пустым значением у атрибута year в body (остальные данные заполнены валидно) на  http://localhost:9999/credit  
   Ожидаемый результат: статус 400, в БД не появляются новые записи

1. Отправка POST запроса платежа с пустым значением у атрибута holder в body (остальные данные заполнены валидно) на  http://localhost:9999/payment  
   Ожидаемый результат: статус 400, в БД не появляются новые записи

1. Отправка POST запроса на кредит с пустым значением у атрибута holder в body (остальные данные заполнены валидно) на  http://localhost:9999/credit  
   Ожидаемый результат: статус 400, в БД не появляются новые записи

1. Отправка POST запроса платежа с пустым значением у атрибута cvc в body (остальные данные заполнены валидно) на  http://localhost:9999/payment  
   Ожидаемый результат: статус 400, в БД не появляются новые записи

1. Отправка POST запроса на кредит с пустым значением у атрибута cvc в body (остальные данные заполнены валидно) на  http://localhost:9999/credit  
   Ожидаемый результат: статус 400, в БД не появляются новые записи

## 2. Перечень используемых инструментов с обоснованием выбора
1. **Java 11** - Универсальный язык, позволяющий работать на большинстве ОС и различном оборудовании.
1. **IntelliJ IDE** - Многофункциональная среда разработки, бесплатная. Хорошая интеграция в GitHub, широкая поддержка расширений и плагинов для тестирования.
1. **Git** - Система контроля версий. Бсплатность, возможность параллельной разработки, хорошая интеграция с IntelliJ IDEA.
1. **JUnit5** - Тестовый фреймворк, совместимый с JVM и IntelliJ IDEA, содержит все необходимые аннотации.
1. **Gradle** - Система сборки проекта. Имеет простой и понятный код, небольшого объема, в сравнению с Maven. Проще подключать внешние зависимости.
1. **Lombok** - Плагин для создания аннотаций, заменяющих значительное количество однообразных конструкторов JAVA таких как getters, setters и пр.
1. **Selenide** - Фреймворк для автоматизированного тестирования веб-приложений на основе Selenium WebDriver. Подключение веб-драйвера происходит автоматически, простое написание кода тестов.
1. **JavaFaker** - Плагин для генерации случайных данных для тестов. Болшое количество настроек, бесплатный, достаточная локализация для России.
1. **Docker** - Система контейризации. Будет использована для имитации работы IT-системы банка посредством развёртывания БД MySQL, PostgreSQL, запуск самого приложения через Node.js.
1. **Appveyor** - Система CI. Непрерывный контроль интеграции кода. Бесплатный, простое подключение и настройка, удобная интеграция с GitHub.
1. **Allure Report** - Система подготовки отчётов. Бесплатное решение. Хорошая информативная визуализация отчётов. Позволяет отслеживать данные на протяжении времени

## 3. Перечень и описание возможных рисков при автоматизации
1. Сложности с запуском и настройкой SUT.
1. Сложности с настройкой автотестов при отсутствии уникальных css-селекторов в приложении.
1. Изменение структуры рабочего сайта (правка дизайна с изменением html, css) в будущем приведёт к неработоспособности текущих автотестов.
1. Потеря актуальности тестов API при изменении структуры запросов со стороны банка.
1. Так как в качестве банковского сервиса выступает симулятор, есть риск, что при подключении реальной системы появятся новые не выявленые деффекты.

## 4. Интервальная оценка с учётом рисков (в часах)
1. Планирование автоматизации тестирования - 3-5 часов
1. Написание кода тестов - 50-70 часов
1. Подготовка отчётных документов по итогам автоматизированного тестирования - 5-8 часов
1. Подготовка отчётных документов по итогам автоматизации - 5-8 часов

## 5. План сдачи Дипломной работы
1. Готовность авто-тестов — через 8 рабочих дней после утверждения плана тестирования;
1. Подготовка отчетов по результатам прогона тестов — через 3 рабочих дня после прогона тестов;
1. Подготовка отчета по итогам автоматизации — через 3 рабочих дня после отчетов по прогону тестов.